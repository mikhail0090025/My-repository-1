define("OK/utils/throttle",[],function(){
/*!
     * jQuery throttle / debounce - v1.1 - 3/7/2010
     * http://benalman.com/projects/jquery-throttle-debounce-plugin/
     *
     * Copyright (c) 2010 "Cowboy" Ben Alman
     * Dual licensed under the MIT and GPL licenses.
     * http://benalman.com/about/license/
     */
return function a(c,d,h,g){var f,b=0;if(typeof d!=="boolean"){g=h;h=d;d=undefined;}return function e(){var m=this,k=Date.now()-b,l=arguments;function j(){b=Date.now();h.apply(m,l);}function i(){f=undefined;}if(g&&!f){j();}if(f){clearTimeout(f);}if(g===undefined&&k>c){j();}else{if(d!==true){f=setTimeout(g?i:j,g===undefined?c-k:c);}}};};});define("OK/LogClicks",["OK/logger","OK/utils/dom"],function(q,h){var j="data-l",m="data-log-click",o="["+j+"],["+m+"]",p="data-force",f="click",i="log.click";function e(r,s,t){if(s&&Object.keys(s).length){r.push(s);if(s.target&&!t.okTarget){t.okTarget=s.target;}}}function l(r){OK.logging.info(f+" "+r);q.success(f,r);}function a(r){OK.logging.info(f+" "+r);q.force(f,r);}function n(r){OK.logging.alert(i+" "+r);q.error(i,r);}function c(s){if(!s){return null;}var r=s.getAttribute(j);if(!r){r=s.getAttribute(m);}return r;}var b={t:"target",ti:"targetId",mB:"mtBlockType",gA:"groupActionType",fF:"feedFeatures",fP:"feedPosition",fL:"feedLocation",fD:"feedDetails",fO:"feedOwners",fI:"feedId",".r":"remove",rM:"removeMenu",".c":"content",".k":"comment",re:"reshare",".l":"like",e1:"entity1",e2:"entity2",uL:"userLink",gL:"groupLink",".a":"action"};function k(w){var t=-2;try{if(!w||w.length==0||/^{|^null&/i.test(w)){t=-1;return JSON.parse(w);}t=0;var E={};var y=false;var A=true;var D="";var C="";var x="";var u=w.length;var r=0;var s=0;for(var v=0;v<u;v++){t=1;var B=w.charAt(v);if(y){y=false;s++;}else{if(B=="\\"){if(s>0){if(A){t=2;D+=w.substr(r,s);}else{t=3;C+=w.substr(r,s);}s=0;}r=v+1;y=true;}else{if(B==","){if(A){if(s>0){t=4;D+=w.substr(r,s);s=0;}A=false;}else{if(s>0){t=5;C+=w.substr(r,s);s=0;}A=true;x=b[D];if(x){D=x;}x=b[C];if(x){C=x;}E[D]=C;D="";C="";}r=v+1;}else{s++;}}}}t=6;if(y){n("err: escapeNow - "+w);}else{if(A){if(r!=u){n("err: keyNow - "+w);}}else{if(r<u){t=7;C+=w.substr(r);}x=b[D];if(x){D=x;}x=b[C];if(x){C=x;}E[D]=C;}}return E;}catch(z){n("unkn err: stepN = "+t+", data = "+w+", e = "+z);return{};}}function d(w){var s,u=false,r=[];try{s=c(w.target);if(s){e(r,k(s),w);}var v=w.target.parentElement;while(v){if(v.matches(o)){s=c(v);if(s){e(r,k(s),w);}}if(v.hasAttribute(p)){u=true;}v=v.parentElement;}if(r.length){if(u){a(JSON.stringify(r));}else{l(JSON.stringify(r));}}}catch(t){n(t);}}function g(r){r.addEventListener("click",d,true);OK.clickLog.incCounter();}return{activate:g,getLogDataAsString:c,parseLogData:k,getLogData:function(s){var r=c(s);if(r){return k(r);}},updateLogData:function(r,s){var u=j;if(r.getAttribute(m)){u=m;}var t=JSON.stringify(s);r.setAttribute(u,t);},copyLogData:function(t,s){var r=j;if(t.getAttribute(m)){r=m;}s.setAttribute(r,t.getAttribute(r));},getClosestLogClickElement:function(r){if(r.matches(o)){return r;}else{return h.traverseParents(r,function(s){return s.matches(o);});}},doLogOnElement:function(r){d({target:r});},LOG_ATTR_SELECTOR:o};});define("OK/LogSeen",["OK/logger","OK/utils/utils","OK/utils/throttle","OK/LogClicks"],function(o,m,n,k){var e="seen",h="log.seen";var b=[];var a=[];var c=n(150,function g(){var p=a.length;while(p--){a[p].onScroll();}});function i(p,r,q){OK.logging.info(e+" "+p+" "+r);o[q?"force":"success"](e,p,r);}function l(p){OK.logging.alert(h+" "+p);o.error(h,p);}function j(){this.params={};this.seenStartTime=0;this.hoverStartTime=0;this.onScrollSeenTimer=null;this.logData={};}j.prototype.activate=function(p){this.element=p;this.params=JSON.parse(p.getAttribute("data-seen-params"));if(this.params.options){this.seenTimeout=this.params.options.seenTimeout;this.skipVisible=this.params.options.skipVisible||false;this.hoverTimeout=this.params.options.hoverTimeout;this.seenPartial=this.params.options.partial||0.01;this.seenForce=this.params.options.force||false;this.onScrollSeen=this.params.options.onScrollSeen||false;this.onScrollSeenTimeout=this.params.options.onScrollSeenTimeout||10000;this.onScrollPartial=this.params.options.onScrollPartial||0.6;var r=k.getLogDataAsString(p);var q=r&&k.parseLogData(r);if(q&&q.feedFeatures){this.params.data=this.params.data||{};this.params.data.feedFeatures=q.feedFeatures;if(q.feedPosition){this.params.data.feedPosition=Number(q.feedPosition);}if(q.feedLocation){this.params.data.feedLocation=q.feedLocation;}}}this.boundMouseEnter=this.mouseEnter.bind(this);this.boundMouseLeave=this.mouseLeave.bind(this);this.boundClick=this.onClick.bind(this);if(this.hoverTimeout){this.element.addEventListener("mouseenter",this.boundMouseEnter);this.element.addEventListener("mouseleave",this.boundMouseLeave);}if(this.seenTimeout){this.element.addEventListener("click",this.boundClick);}if(this.seenTimeout&&!this.skipVisible){if(m.isElementPartiallyInViewport(p,this.seenPartial)){this.shown();}}return this;};j.prototype.deactivate=function(){if(this.hoverTimeout){this.element.removeEventListener("mouseenter",this.boundMouseEnter);this.element.removeEventListener("mouseleave",this.boundMouseLeave);}if(this.seenTimeout){this.element.removeEventListener("click",this.boundClick);this.hidden();}};j.prototype.shown=function(){this.logData=Object.assign({},this.params.data);this.seenStartTime=Date.now();};j.prototype.shownOnScroll=function(){if(!this.onScrollSeen||this.onScrollSeenTimer||this.logData.seen){return;}var p=m.isElementPartiallyInViewport(this.element,this.onScrollPartial);if(!p){return;}this.onScrollSeenTimer=setTimeout(function(){if(this.logData.seen){return;}this.logData.seen=this.onScrollSeenTimeout;i(this.params.type,JSON.stringify(this.logData),this.seenForce);}.bind(this),this.onScrollSeenTimeout);};j.prototype.hidden=function(){if(this.seenStartTime&&!this.logData.seen){var p=Date.now()-this.seenStartTime;if(p>=this.seenTimeout){this.logData.seen=p;i(this.params.type,JSON.stringify(this.logData),this.seenForce);}}this.logData.seen=0;this.seenStartTime=0;if(this.onScrollSeenTimer){clearTimeout(this.onScrollSeenTimer);this.onScrollSeenTimer=null;}};j.prototype.mouseEnter=function(){this.hoverStartTime=Date.now();};j.prototype.mouseLeave=function(){if(this.hoverStartTime){var p=Date.now()-this.hoverStartTime;if(p>=this.hoverTimeout){this.logData.hovered=p;}}this.hoverStartTime=0;};j.prototype.onScroll=function(){if(this.seenTimeout){var p=m.isElementPartiallyInViewport(this.element,this.seenPartial);if(p){if(!this.seenStartTime){this.shown();}this.shownOnScroll();}else{this.hidden();}}};j.prototype.onClick=function(){if(this.seenStartTime){this.logData.seen=Date.now()-this.seenStartTime;}else{if(this.skipVisible){this.shown();}this.logData.seen=0;}this.logData.seen=this.seenStartTime?Date.now()-this.seenStartTime:0;this.logData.clicked=true;i(this.params.type,JSON.stringify(this.logData),this.seenForce);this.seenStartTime=0;};function f(q){var p=b.indexOf(q);if(p===-1){b.push(q);a.push(new j().activate(q));}if(a.length===1){window.addEventListener("scroll",c,true);}}function d(q){var p=b.indexOf(q);if(p!==-1){a[p].deactivate();b.splice(p,1);a.splice(p,1);}if(!a.length){window.removeEventListener("scroll",c,true);}}return{logError:l,logSuccess:i,activate:f,deactivate:d};});define("OK/utils/debounce",["OK/utils/throttle"],function(b){return function a(c,d,e){return e===undefined?b(c,d,false):b(c,e,d!==false);};});define("OK/entitySuggest/EntitySuggestSeenLogger",["OK/utils/utils","OK/LogSeen","OK/utils/debounce"],function(b,d,c){function a(g,f){if(!g){return;}try{this.seenParams=JSON.parse(g);}catch(e){this.seenParams=null;return;}this.logged={};this.entities=f;if(this.seenParams.options.scrollHanlderElement){this.scrollHanlderElement=document.getElementsByClassName(this.seenParams.options.scrollHanlderElement)[0];}if(!this.scrollHanlderElement){this.scrollHanlderElement=window;}this.logSeenInternal=function(){this.logSeen(this.entities);}.bind(this);this.logSeenOnWinowScroll=c(150,function(h){if(!h.isTrigger){this.logSeenInternal();}}.bind(this));this.scrollHanlderElement.addEventListener("scroll",this.logSeenOnWinowScroll);setTimeout(this.logSeenInternal,0);}a.prototype={logSeen:function(i){if(!this.seenParams){return;}var f=[];for(var e in i){if(i.hasOwnProperty(e)){var g=i[e];if(b.isElementPartiallyInViewport(g.element,0.9)){if(!this.logged[e]){this.logged[e]=true;var h=parseInt(e,10);if(h){f.push(h);}}}else{if(!b.isElementPartiallyInViewport(g.element,0.2)){this.logged[e]=false;}}}}if(f.length>0){this.seenParams.data.user_ids=f.join(",");d.logSuccess(this.seenParams.type,JSON.stringify(this.seenParams.data));}},deactivate:function(){if(this.scrollHanlderElement){this.scrollHanlderElement.removeEventListener("scroll",this.logSeenOnWinowScroll);}}};return a;});define("OK/entitySuggest/AbstractEntitySuggest",["OK/capture","OK/utils/delegate","OK/utils/dom","OK/utils/utils","OK/entitySuggest/EntitySuggestSeenLogger"],function(k,d,c,j,b){var e=1000;var g={LOADED:"loaded",READY:"ready",SUCCESS:"success",PROCESS:"process",ERROR:"error",HIDE:"hide"};var a={friendshipRequests:"/dk?cmd=FriendshipRequests",pymk:"/dk?cmd=AddPossibleFriend",pymkRelations:"/dk?cmd=AddPossibleFriend",commonFriends:"/dk?cmd=NotificationsRecommendedFriends",friendship:"/dk?cmd=AddPossibleFriend",recommendations:"/dk?cmd=GetRecommendOrPYMK"};var i={friendshipRequests:{portlets:{},commonEntities:{}},pymk:{portlets:{},commonEntities:{}},pymkRelations:{portlets:{},commonEntities:{}},commonFriends:{portlets:{},commonEntities:{}},recommendations:{portlets:{},commonEntities:{}},friendship:{portlets:{},commonEntities:{}}};var f=0;function h(){this.uniqueId=(function(l){return function(){return l;};}(++f));}h.entityStateStatus=g;h.urlConfig=a;h.typeStorage=i;h.prototype.acceptEntity=function(l,m){};h.prototype.declineEntity=function(l){};h.prototype.addElement=function(n,m){var l=n.getAttribute("data-entity-id");if(l&&this.entities[l]===undefined){this.entities[l]={element:n,state:m};if(i[this.type].commonEntities[l]===undefined){i[this.type].commonEntities[l]=[this];}else{i[this.type].commonEntities[l].push(this);}return l;}return null;};h.prototype.replaceElement=function(n,r){if(!n||!this.entities[n]){return;}var p=this.entities[n].element;var t=p.parentNode;var s=c.byClass(this.hook,this.hookClass);var o=s.indexOf(p);delete this.entities[n];delete i[this.type].commonEntities[n];if(r){k.deactivate(p);t.removeChild(p);var l=document.createElement("div");l.innerHTML=r;var q=l.firstElementChild;q.classList.add("__loaded");t.appendChild(q);var m=this.addElement(q,g.LOADED);k.activate(q);this.hook.dispatchEvent(new CustomEvent("entitySuggestUpdateCount",{detail:{type:"replace",index:o}}));if(m){var u={};u[m]=this.entities[m];this.seenLogger.logSeen(u);}}else{this.emptyListChecker(function(){var w=OK.hookModel.getNearestBlockHookId(p);var v=OK.hookModel.getHookById(w).element;k.deactivate(p,true);c.remove(v);this.hook.dispatchEvent(new CustomEvent("entitySuggestUpdateCount",{detail:{type:"remove",index:o}}));}.bind(this));}};h.prototype.emptyListChecker=function(l){if(Object.keys(this.entities).length){l();}else{if(this.emptyBlockCallback){j.ajax({url:this.emptyBlockCallback}).done(function(n,m,o){l();j.updateBlockModelCallback(n,m,o);});}else{this.hook.classList.add("invisible");l();}}};h.prototype.setEntityState=function(n,m){var l=this.entities[n];if(l&&(l.state!==m)){var o=l.element.classList;switch(m){case g.READY:o.remove("__loaded");break;case g.HIDE:o.remove("__highlight");o.add("__hide");break;case g.SUCCESS:case g.PROCESS:case g.ERROR:o.remove("__success","__process","__error","__highlight");o.add("__"+m);break;}l.state=m;}};h.prototype.getRenderingList=function(){return Object.keys(i[this.type].commonEntities);};h.prototype.prepareRequest=function(l){var n=i[this.type].commonEntities[l];var p=[];var o=[];n.forEach(function(r){p.push(r.mode);o.push(r.size||"");});var q=false;for(var m=0;m<n.length;m++){q=q||i[this.type].portlets[n[m].uniqueId()].largeCard;}return{target:l,"st.modes":p.join(";"),list:this.getRenderingList().join(";"),disableShortcut:this.disableShortcut,largeCard:q,"st.sizes":o.join(";")};};h.prototype.processEntityModes=function(m,p){var l=i[this.type].commonEntities[m];for(var o=0;o<l.length;o++){var n=i[this.type].portlets[l[o].uniqueId()];p(n,o);}};h.prototype.setModesEntityState=function(m,l){this.processEntityModes(m,function(n){n.setEntityState(m,l);});};h.prototype.replaceContent=function(l,m){this.processEntityModes(l,function(n,o){n.entities[l].newElementHTML=Array.isArray(m)?m[o]:null;});this.setModesEntityState(l,g.HIDE);};h.prototype.getEntityAttribute=function(m,l){return this.entities[m].element.getAttribute(l);};h.prototype.getActivityId=function(o,m){var n=m?"data-aid-accept":"data-aid-decline";var l=m?this.activityIdAccept:this.activityIdDecline;var p=this.entities[o].element.getAttribute(n);return p||l;};h.prototype.getAction=function(o,m){var n=m?"data-action-accept":"data-action-decline";var l=m?this.actionAccept:this.actionDecline;var p=this.entities[o].element.getAttribute(n);return p||l;};h.prototype.isUseOptimisticHandler=function(){return this.optimistic;};h.prototype.defaultRequestHandler=function(n,m,o){var l=n.target;this.setModesEntityState(l,g.PROCESS);j.ajax({url:a[this.type],data:n}).done(function(p){if(typeof m==="function"){m.call(this,n,p);}if(i[this.type].commonEntities[l]){this.setModesEntityState(l,g.SUCCESS);if(p){var q=p.split(OK.navigation.SPLITER);setTimeout(this.replaceContent.bind(this,l,q),e);}else{if(typeof o==="function"){o.call(this,n);}}}}.bind(this)).fail(function(){this.setModesEntityState(l,g.ERROR);}.bind(this));};h.prototype.optimisticRequestHandler=function(m){var l=m.target;this.replaceContent(l);j.ajax({url:a[this.type],data:m}).done(function(n){if(this.entities[l]&&(this.entities[l].state===g.HIDE)&&n){var o=n.split(OK.navigation.SPLITER);this.replaceContent(l,o);}}.bind(this));};h.prototype.register=function(l){for(var m=0;m<l.length;m++){this.addElement(l[m],g.READY);}};h.prototype.append=function(l){var m=document.createElement("div");var n;m.innerHTML=l;this.register(c.byClass(m,this.hookClass));while(n=m.firstElementChild){this.hook.appendChild(n);k.activate(n);}this.hook.dispatchEvent(new CustomEvent("entitySuggestUpdateCount",{detail:{type:"append"}}));};h.prototype.click=function(n,m){var l=m.getAttribute("data-entity-id");if(this.entities[l].state!==g.READY){return;}if(m.classList.contains("js-entity-decline")){this.declineEntity(l);}else{if(m.classList.contains("js-entity-accept")){this.acceptEntity(l,m);}}};h.prototype.appearance=function(o){var n=o.target;var m=n.getAttribute("data-entity-id");if(m){var l=this.entities[m];if(l.state===g.HIDE){this.replaceElement(m,l.newElementHTML);}if(l.state===g.LOADED){this.setEntityState(m,g.READY);}}};h.prototype.getPortlets=function(l){return i[l].portlets;};h.prototype.getCommonEntities=function(l){return i[l].commonEntities;};h.prototype.activate=function(l){this.hook=l;this.entities={};this.hookClass="js-entity-item";this.clickHandler=this.click.bind(this);this.appearanceHandler=this.appearance.bind(this);this.boundRegister=function(p){if(p.detail&&Array.isArray(p.detail.elements)){var n=[];for(var q=0;q<p.detail.elements.length;q++){var m=p.detail.elements[q];var o=m.classList.contains(this.hookClass)?m:c.firstByClass(m,this.hookClass);if(o){n.push(o);}}this.register(n);}}.bind(this);this.type=l.getAttribute("data-type");this.mode=l.getAttribute("data-mode");this.emptyBlockCallback=l.getAttribute("data-empty-block");this.disableShortcut=l.getAttribute("data-disable-shortcut")==="true";this.largeCard=l.getAttribute("data-large-card")==="true";this.optimistic=l.getAttribute("data-optimistic")==="true";this.activityIdAccept=l.getAttribute("data-aid-accept");this.activityIdDecline=l.getAttribute("data-aid-decline");this.actionAccept=l.getAttribute("data-action-accept")||"add";this.actionDecline=l.getAttribute("data-action-decline")||"remove";this.delegator=new d(l);this.seenLogger=new b(l.getAttribute("data-seen-params"),this.entities);this.size=l.getAttribute("data-size");this.register(c.byClass(this.hook,this.hookClass));this.hook.addEventListener("animationend",this.appearanceHandler);this.hook.addEventListener("dataload",this.boundRegister);this.delegator.on("click",".js-entity-accept, .js-entity-decline",this.click.bind(this));i[this.type].portlets[this.uniqueId()]=this;l.setAttribute("data-entity-suggest-id",this.uniqueId());};h.prototype.deactivate=function(){this.seenLogger.deactivate();delete i[this.type].portlets[this.uniqueId()];for(var n in this.entities){if(this.entities.hasOwnProperty(n)){var m=i[this.type].commonEntities[n];if(m.length>1){var l=i[this.type].commonEntities[n].indexOf(this);i[this.type].commonEntities[n].splice(l,1);}else{delete i[this.type].commonEntities[n];}}}this.hook.removeEventListener("animationend",this.appearanceHandler);this.hook.removeEventListener("dataload",this.boundRegister);this.delegator.off();};return h;});define("OK/entitySuggest/PYMKCard",["OK/entitySuggest/AbstractEntitySuggest"],function(b){function a(){b.call(this);}a.prototype=Object.create(b.prototype);a.prototype.acceptEntity=function(c){var d=this.prepareRequest(c);d["st._aid"]=this.getActivityId(c,true);d.action=this.getAction(c,true);if(this.isUseOptimisticHandler()){this.optimisticRequestHandler(d);}else{this.defaultRequestHandler(d);}};a.prototype.declineEntity=function(c){var d=this.prepareRequest(c);d.action=this.actionDecline;d["st._aid"]=this.getActivityId(c,false);this.optimisticRequestHandler(d);};return a;});define("OK/entitySuggest/PYMKRelationsCard",["OK/entitySuggest/AbstractEntitySuggest"],function(a){function b(){a.call(this);}b.prototype=Object.create(a.prototype);b.prototype.acceptEntity=function(c,d){var e=this.prepareRequest(c);e["st._aid"]=this.getActivityId(c,true);e.action=this.getAction(c,true);e.relsAdd=d.getAttribute("data-relsAdd");this.optimisticRequestHandler(e);};b.prototype.declineEntity=function(c){var d=this.prepareRequest(c);d.action=this.actionDecline;d["st._aid"]=this.getActivityId(c,false);this.optimisticRequestHandler(d);};return b;});define("OK/entitySuggest/FriendshipCard",["OK/entitySuggest/AbstractEntitySuggest","OK/ToolbarBubble","OK/FriendshipCardCounters","OK/utils/utils"],function(c,e,d,b){function a(){c.call(this);}a.prototype=Object.create(c.prototype);a.prototype.getRenderingList=function(){if(this.mode==="wideportlet"){return[];}var f=c.prototype.getRenderingList.call(this);var g=f.indexOf("wideportlet");if(g!==-1){f.splice(g,1);}return f;};a.prototype.acceptEntity=function(f){var h=this.prepareRequest(f);var g=this.getEntityAttribute(f,"data-item-action-accept");h["st._aid"]=this.getActivityId(f,true);h.action=g==undefined?this.actionAccept:g;var i=this.getEntityAttribute(f,"data-item-fbp-photoid");var j=this.getEntityAttribute(f,"data-item-fbp-hash");if(i!=undefined&&j!=undefined){h.fbpPhotoId=i;h.fbpHash=j;}this.switchStatus(f,this.actionAccept);this.defaultRequestHandler(h,this.onAcceptResponseCallback,this.onEmptyResponse);};a.prototype.declineEntity=function(f){var h=this.prepareRequest(f);var g=this.getEntityAttribute(f,"data-item-action-decline");h.action=g==undefined?this.actionDecline:g;h["st._aid"]=this.getActivityId(f,false);var i=this.getEntityAttribute(f,"data-item-fbp-photoid");var j=this.getEntityAttribute(f,"data-item-fbp-hash");if(i!=undefined&&j!=undefined){h.fbpPhotoId=i;h.fbpHash=j;}this.switchStatus(f,this.actionDecline);this.defaultRequestHandler(h,this.onDeclineResponseCallback,this.onEmptyResponse);};a.prototype.onAcceptResponseCallback=function(g,f){if(this.mode==="wideportlet"&&f){this.replaceElement(g.target,f);}this.decreaseFriendshipRequestCounters();this.updateMotivationBlock();};a.prototype.onDeclineResponseCallback=function(g,f){this.decreaseFriendshipRequestCounters();this.updateMotivationBlock();};a.prototype.decreaseFriendshipRequestCounters=function(){var f;if(this.actionDecline=="revoke"){f=["counter_outgoingFriendRequestsPage"];}else{f=["counter_friendRequestsPage","counter_Toolbar_friends","counter_friendRequestBurningHeader"];}f.forEach(function(h){var g=e.wrap(h);if(g){g.decrease(1);}});d.decreaseCounters(this.type,1);};a.prototype.switchStatus=function(f,g){this.processEntityModes(f,function(h){var j=h.entities[f].element;var k=j.getElementsByClassName("js-done")[0];var i=j.getElementsByClassName("js-decline")[0];switch(g){case this.actionAccept:k.classList.remove("invisible");i.classList.add("invisible");break;case this.actionDecline:k.classList.add("invisible");i.classList.remove("invisible");break;}}.bind(this));};a.prototype.updateMotivationBlock=function(){b.ajax({url:"/dk",data:{cmd:"FriendshipRequestMotivatorController"}}).done(b.updateBlockModelCallback);};a.prototype.onEmptyResponse=function(g){var f=g.target;setTimeout(function(){this.processEntityModes(f,function(k){if(k.emptyBlockCallback){var i=true;for(var j in k.entities){if(k.entities.hasOwnProperty(j)){var h=k.entities[j].state;if(h!==c.entityStateStatus.SUCCESS){i=false;}}}if(i){b.ajax({url:k.emptyBlockCallback}).done(function(m,l,n){b.updateBlockModelCallback(m,l,n);});}}}.bind(this));}.bind(this),1000);};return a;});define("OK/entitySuggest/SetSuccessCardStatus",["OK/entitySuggest/AbstractEntitySuggest","OK/entitySuggest/FriendshipCard"],function(c,b){var d=["friendshipRequests","pymk","commonFriends","friendship","recommendations"];function a(){c.call(this);}a.prototype=Object.create(c.prototype);a.prototype.setSuccess=function(){var e=c.typeStorage;for(var f=0;f<d.length;f++){this.type=d[f];if(e[this.type].commonEntities[this.entityId]){if(this.type==="friendshipRequests"){b.prototype.switchStatus.call(this,this.entityId,this.actionAccept);}this.setModesEntityState(this.entityId,c.entityStateStatus.SUCCESS);}}};a.prototype.activate=function(e){this.element=e;this.entityId=this.element.getAttribute("data-entity-id");this.boundSetSuccess=this.setSuccess.bind(this);this.element.addEventListener("click",this.boundSetSuccess,false);};a.prototype.deactivate=function(){this.element.removeEventListener("click",this.boundSetSuccess,false);};return a;});define("b/entitySuggest",["OK/entitySuggest/AbstractEntitySuggest","OK/entitySuggest/PYMKCard","OK/entitySuggest/PYMKRelationsCard","OK/entitySuggest/FriendshipCard","OK/entitySuggest/EntitySuggestSeenLogger","OK/entitySuggest/SetSuccessCardStatus"],{});