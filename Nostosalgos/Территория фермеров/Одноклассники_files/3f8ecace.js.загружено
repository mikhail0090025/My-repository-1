define(function(){var h;var c=document.getElementById("js-navPrBar");if(c){var q={text:"Сервис временно недоступен",showResend:false};var b=c.getElementsByClassName("navErrorMsg")[0];var m=b.getElementsByClassName("navErrorMsgTxt")[0];var f=b.getElementsByClassName("resendNavReq")[0];var x=c.getElementsByClassName("closeNavPr")[0];var u={};if(b.hasAttribute("data-errors")){u=JSON.parse(b.getAttribute("data-errors"));}x.addEventListener("click",function(){d(true);});f.addEventListener("click",function(){if(h.resend){h.resend();}});}var t;var w;var j;var n;function s(D){c.classList.toggle("__collapse",!D);if(!D){w=setTimeout(function(){c.classList.remove("__dark");h.resend=null;},200);}}function e(){c.classList.remove("__slim");c.classList.add("__expand");}function B(){c.classList.add("__slim");c.classList.remove("__expand");}function C(D){slowInternetMsg.classList.toggle("invisible",!D);}function r(D){var E=u[D];if(E===undefined){return q;}else{return E;}}function o(E){e();var D=r(E);m.textContent=D.text;A(D.showResend);l(true);}function A(D){f.classList.toggle("invisible",!D);}function l(D){x.classList.toggle("invisible",!D);b.classList.toggle("invisible",!D);c.classList.toggle("__dark",D);}function k(){o("internet.no");}function a(){o("internet.slow");}function g(){o("service-unavailable");}function p(){B();l(false);A(false);m.textContent="";}function d(D){clearTimeout(j);clearTimeout(n);clearTimeout(w);clearTimeout(t);p();c.classList.add("__no-anim");if(D){s(false);}c.classList.remove("__milestone");c.classList.remove("__complete");}function i(){return !c.classList.contains("__collapse");}function z(D){t=setTimeout(function(){clearTimeout(t);a();},D);}function v(){c.classList.add("__milestone");}function y(E,D){if(!i()){j=setTimeout(function(){s(true);v();},E);}else{v();}z(D);}h={resend:null,startTimeout:null,slowTimeout:null,showProgress:function(){if(!c){return;}d(false);c.offsetHeight;c.classList.remove("__no-anim");y(this.startTimeout,this.slowTimeout);},finishProgress:function(D){if(!c){return;}clearTimeout(j);clearTimeout(t);c.classList.add("__complete");c.classList.remove("__milestone");n=setTimeout(function(){clearTimeout(n);p();s(false);},D);},showNoInternetError:function(){if(!c){return;}d(false);s(true);k();},showServiceUnavailable:function(){if(!c){return;}d(false);s(true);g();}};return h;});