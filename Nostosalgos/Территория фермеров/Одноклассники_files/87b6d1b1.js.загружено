define(["jquery"],function(b){var a=function(){this.currentOffset=0;this.setTransform=function(d,c){d.style.cssText="transform: "+c+"; -webkit-transform: "+c+"; -moz-transform: "+c+"; -ms-transform: "+c+";";};this.setArrowState=function(c){var e=c.querySelector(".comments_smiles_nav_arr.__prev");var d=c.querySelector(".comments_smiles_nav_arr.__next");if(d){if((this.currentOffset+1)*(this.visibleTabs+1)>this.subTabsArray.length){d.classList.add("__disabled");}else{if(d.classList.contains("__disabled")){d.classList.remove("__disabled");}}}if(e){if(!this.currentOffset){e.classList.add("invisible");}else{if(e.classList.contains("invisible")){e.classList.remove("invisible");}}}};};a.prototype={init:function(c){var d;this.offsetArray=[];this.subTabs={};this.subTabsArray=[];this.visibleTabs={};c=c||document.querySelector(".comments_smiles.__current .js-emoji-scroll");if(c){d=document.querySelector(".comments_smiles.__current").getElementsByClassName("comments_smiles_set");this.subTabs=c.parentNode.querySelector(".comments_smiles_nav");this.controls=this.subTabs&&this.subTabs.querySelector(".comments_smiles_nav_ac");this.subTabsArray=this.subTabs&&this.subTabs.getElementsByClassName("comments_smiles_nav_i");this.scrollableContainer=this.subTabs.querySelector(".comments_smiles_nav_cnt");this.showcaseButtonText=this.subTabs&&this.subTabs.querySelector(".comments_smiles_nav_tx");this.controlWidth=this.controlWidth||(this.controls&&this.controls.offsetWidth)||0;this.visibleTabs=Math.floor((this.subTabs.offsetWidth-this.controlWidth)/this.subTabsArray[0].offsetWidth);if(this.showcaseButtonText){if(this.subTabsArray.length>this.visibleTabs){this.showcaseButtonText.classList.add("invisible");}else{this.showcaseButtonText.classList.remove("invisible");}}if(d){for(var e=0;e<d.length;e++){this.offsetArray.push(d[e].offsetTop);}}}},clearActive:function(c){var d=c.querySelector(".comments_smiles_nav_i.__active");d&&d.classList.remove("__active");},resetOffsets:function(){if(this.offsetArray){this.offsetArray.length=0;}},nextRow:function(e,d){var c=d.querySelector(".comments_smiles.__current .js-emoji-scroll");if(!this.offsetArray.length){this.init(c);}if(this.subTabsArray.length>=(this.currentOffset+1)*(this.visibleTabs+1)){this.currentOffset++;this.setTransform(this.scrollableContainer,"translateX(-"+(this.currentOffset*this.visibleTabs*this.subTabsArray[0].offsetWidth)+"px)");this.setArrowState(d);}},prevRow:function(e,d){var c=d.querySelector(".comments_smiles.__current .js-emoji-scroll");if(!this.offsetArray.length){this.init(c);}if((this.currentOffset-1)*this.visibleTabs>=0){this.currentOffset--;this.setTransform(this.scrollableContainer,"translateX(-"+(this.currentOffset*this.visibleTabs*this.subTabsArray[0].offsetWidth)+"px)");this.setArrowState(d);}},switchOnScroll:function(d,c){var e=1;var f;if(!this.offsetArray.length){this.init(d);}f=this.offsetArray.length;if((d.scrollTop===d.scrollHeight-d.clientHeight)&&(!this.subTabsArray[f-1].classList.contains("__active"))){this.clearActive(this.subTabs);this.subTabsArray[f-1].classList.add("__active");}else{while(d.scrollTop+this.offsetArray[0]<this.offsetArray[f-e]){e++;}if(!this.subTabsArray[f-e].classList.contains("__active")){this.clearActive(this.subTabs);this.subTabsArray[f-e].classList.add("__active");if((f>8)&&(this.currentOffset!=Math.floor((f-e)/this.visibleTabs))){this.currentOffset=Math.floor((f-e)/this.visibleTabs);this.setTransform(this.scrollableContainer,"translateX(-"+(this.currentOffset*this.visibleTabs*this.subTabsArray[0].offsetWidth)+"px)");this.setArrowState(c);}}}},jumpToSet:function(g){var f;var e;var c;var d;if(g){if(g.indexOf("#")===0){g=g.substring(1);}f=document.getElementById(g);e=f&&f.parentNode;c=e&&e.firstChild.offsetTop;d=f&&f.offsetTop;if(e&&d){b(e).animate({scrollTop:d-c},"300");}}}};return a;});