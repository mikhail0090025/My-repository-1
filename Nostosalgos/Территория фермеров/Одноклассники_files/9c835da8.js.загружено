define(["jquery","OK/utils/textchange"],function(c,a){var b="textchange.textCounter",d={maxLength:4096,threshold:50,warningClass:"__txt-counter-active",errorClass:"__txt-counter-err",onStateChanged:c.noop,valueGet:function(){return this.attr("contenteditable")==="true"?this.html():this.val();}};c.fn.textCounter=function(e,f){f=c.extend({},d,f||{});this.each(function(){var i=c(this),g=i.parent(),h=function(){var n=f.valueGet.call(e),k=f.maxLength-n.length,l=i.data("isErrorState")||false;var m=k>=0&&k<=f.threshold,j=k<0;if(m||j){i.text(k);}g.toggleClass(f.warningClass,m).toggleClass(f.errorClass,j);if(l!=j){f.onStateChanged.call(i,j);i.data("isErrorState",j);}return h;};e.off(b);e.on(b,h());h();});};});