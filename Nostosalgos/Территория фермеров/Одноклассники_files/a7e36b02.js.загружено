define(["jquery","OK/utils/utils","OK/logger"],function(f,l,m){var o,c,n,h,a,e={tabsClass:".js-tabs-t",panelsClass:".js-tabs-c",activeClass:"__current",loadingClass:"__loading",useHref:false,openFirstTab:false,onLoadFinish:f.noop};function d(r,q){var p=r.attr("href");q.addClass(o.loadingClass);l.ajax({url:p}).done(function(s,u,t){q.html(s);o.onLoadFinish(q);o.onTabOpened();q.removeClass(o.loadingClass);}).fail(function(s,u,t){m.error("ta","tabError");});}function k(){c.click();}function b(p){h.filter(p).first().click();}function g(p){return n.find(a.get(p));}function j(q){var p=q.index();d(q,g(p));}function i(){return h.filter("."+o.activeClass).first();}f.fn.tabs=function(t){o=f.extend({},e,t);n=f(this);h=n.find(o.tabsClass);a=n.find(o.panelsClass);var s,q,r,p=h.on("click.tabs",function(u){u.preventDefault();s=f(this);q=s.index();r=g(q);if(s.hasClass(o.activeClass)){if(!r.hasClass(o.loadingClass)){o.onTabOpened();}return;}h.removeClass(o.activeClass);a.removeClass(o.activeClass);s.addClass(o.activeClass);r.addClass(o.activeClass);m.success("ta","emojiTab",q);if(o.useHref&&!r.contents()[0]){d(s,r);}else{o.onTabOpened();}});c=h.first();if(o.openFirstTab&&!h.hasClass(o.activeClass)){k();}return this.each(function(){p;});};f.fn.tabs.activateFirstTab=function(){k();};f.fn.tabs.activateTab=function(p){b(p);};f.fn.tabs.reloadTab=function(p){j(p);};f.fn.tabs.getActiveTab=function(){return i();};});