/**
 * Ads.js - Mail.ru external ads
 * Release date: 27.11.2019
 * Version: 1.0.9
 */
(function(c,f,A){var w;w={l:function(c){return f.getElementById(c)},a:function(c,f,p){c.addEventListener?c.addEventListener(f,p,!1):c.attachEvent&&c.attachEvent("on"+f,p)},b:function(c,f,p){c.removeEventListener?c.removeEventListener(f,p,!1):c.detachEvent&&c.detachEvent("on"+f,p)},m:function(c){var f=0,p;for(p in c)c.hasOwnProperty(p)&&f++;return f}};(function(B,l){function p(){this.push=function(){for(var a=0;a<arguments.length;a++){var b=arguments[a];try{b&&(b.iframeMode&&"boolean"===typeof b.iframeMode&&
(X=!0),b.onAdsLoaded&&"function"===typeof b.onAdsLoaded&&(g.onAdsLoaded=b.onAdsLoaded),b.onAdsSuccess&&"function"===typeof b.onAdsSuccess&&(g.onAdsSuccess=b.onAdsSuccess),b.onAdsRefreshed&&"function"===typeof b.onAdsRefreshed&&(g.onAdsRefreshed=b.onAdsRefreshed),b.onAdsClicked&&"function"===typeof b.onAdsClicked&&(g.onAdsClicked=b.onAdsClicked),b.onAdsClosed&&"function"===typeof b.onAdsClosed&&(g.onAdsClosed=b.onAdsClosed),b.onNoAds&&"function"===typeof b.onNoAds&&(g.onNoAds=b.onNoAds),b.onScriptError&&
"function"===typeof b.onScriptError&&(g.onScriptError=b.onScriptError),b.preventDefaultRendering&&"boolean"===typeof b.preventDefaultRendering&&(Y=!0),"boolean"===typeof b.preventAutoLoad&&(U=b.preventAutoLoad)),!b.element&&U||Z(b.element)}catch(d){}}};l.a(c,"load",aa);l.a(c,"orientationchange",r);l.a(c,"resize",r);l.a(f,"mrg-click",ba);l.a(f,"mrg-close",ca)}function Z(a){C=a?[a]:f.querySelectorAll("ins.mrg-tag");for(var b,d=0,c=C.length;d<c;d++)if(b=C[d],!b.getAttribute("data-ad-status")||a)b.id=
A+"_"+b.getAttribute("data-ad-slot")+"_"+(new Date).getTime(),b.setAttribute("data-ad-status","pending"),X?x(b):I(b)}function I(a){var b;a?(b=a,J.push(a)):b=J&&J[0];b&&(a=b&&b.getAttribute("data-ad-slot"),b=D(b,"ad-query")||"",E||(clearTimeout(E),E=setTimeout(O,3E3),u([a],b)))}function O(){clearTimeout(E);P.warn("Seems to be connection problems")}function x(a){var b,d,e,f;b=a&&a.getAttribute("data-ad-slot");f=D(a,"ad-query")||"";d=w("?"+f);f=f.replace("udid=",(/(iPad|iPhone|iPod)/g.test(navigator.userAgent)?
"idfa":d&&0<=d.indexOf("-")?"advertising_id":"sha1_android_id")+"=").replace("lng=","lon=");e=("http:"===c.location.protocol?"http:":"https:")+"//ad.mail.ru/mobile/"+b+"/?"+f;(function(b,a){ka(e,function(d){d?(d={html:d,slot:a},F(d,b),g.onAdsLoaded&&g.onAdsLoaded(d),b.setAttribute("data-ad-status","ready")):(g.onNoAds&&g.onNoAds({slot:a,el:b}),b.setAttribute("data-ad-status","empty"))})})(a,b)}function u(a,b){var d=b;Q.length&&(d="last_shown_ids="+Q.join(",")+"&"+b);var e=("http:"===c.location.protocol?
"http:":"https:")+"//ad.mail.ru/adq/?callback="+da+("&q="+a.join("&q="))+"&"+d+"&_="+Math.round(1E9*Math.random());(function(b){la(e,function(a){a:{if(g.onAdsLoaded&&"function"===typeof g.onAdsLoaded&&(g.onAdsLoaded(a),Y))break a;if((!a||a&&!a.length)&&g.onNoAds&&"function"===typeof g.onNoAds)g.onNoAds();for(var d=a.length-1;0<=d;d--)if(a[d].html&&/\S/.test(a[d].html)||!g.onNoAds||"function"!==typeof g.onNoAds){var c=F(a[d],b);c&&("string"===typeof c&&(c=c.replace("b","").split("_")[0]),Q=Q.concat(c));
b.setAttribute("data-ad-status","ready");if(g.onAdsSuccess&&"function"===typeof g.onAdsSuccess)g.onAdsSuccess({slot:a[d].slot,el:b,data:a[d]})}else g.onNoAds({slot:a[d].slot,el:b}),b.setAttribute("data-ad-status","empty");J.shift();clearTimeout(E);E=0;I()}})})(J[0])}function F(a,b){var d=new RegExp(ea,"img"),c=f.write,e=a.html,g;b.innerHTML=e;e=K(b,e);if(g=b.querySelector(".trg-b-standard.floating")){if(e=L(b))return b.innerHTML="",!1;y(g);m=b;k(b);z(b)}else if(g=b.querySelector(".trg-b-standard"))b.innerHTML=
"",d=document.createElement("iframe"),d.style.width="100%",d.style.height="0",d.style.border="none",d.marginWidth=d.marginHeight="0",b.appendChild(d),d.contentWindow.document.open(),d.contentWindow.document.write(e),d.contentWindow.document.close(),d.style.transition=R.transition,d.style.webkitTransition=R.webkitTransition,d.style.height=d.contentWindow.document.body.scrollHeight+"px";else try{M=e.match(d),f.write=function(){},M&&S(b),f.write=c}catch(h){P.warn("Can't evaluate script")}e=[];if((d=
b.querySelectorAll("[data-trg-id]"))&&d.length)for(c=0;c<d.length;c++){var l=d[c].getAttribute("data-trg-id");l&&e.push(l)}if(e.length)return e;if(g&&g.id)return g.id}function K(a,b){var d;d=a.querySelector(".trg-b-standard");if(!d)return b;var c=[],e=a.querySelectorAll(".mailru-visibility-check-counter");(d=d&&d.getAttribute("data-counter"))&&c.push(d);for(d=e.length-1;0<=d;d--){var f=e[d].getAttribute("data-counter");f&&c.push(f)}b=b.replace("data-counter","data-counter-blocker");a.innerHTML=b;
if(c.length)try{B.j({h:a,o:c})}catch(g){P.log(g)}return b}function L(a){var b=f.location.href+"_"+a.id.replace(A,"");a="object"===typeof localStorage&&localStorage.setItem?localStorage.getItem(b.toString()):null;a=(new Date).getTime()-(a||0);if(6E4<=a)return!1;setTimeout(function(){V(b)},6E4-a);return!0}function y(a){if(T=a.className.split("timeout_")[1])T=parseInt(T.split(" ")[0],10),fa=setTimeout(function(){var a=m.id.replace(A,"");if(g.onAdsRefreshed&&"function"===typeof g.onAdsRefreshed)g.onAdsRefreshed(a);
u([a])},1E3*T)}function k(a){if(a&&a.parentNode){var b=a.innerHTML;a.innerHTML="";a.parentNode.removeChild(a);f.getElementsByTagName("body")[0].insertBefore(a,f.getElementsByTagName("body")[0].firstChild);var d=document.createElement("iframe");d.style.width=d.style.height="100%";d.marginWidth=d.marginHeight="0";d.scrolling="no";a.appendChild(d);d.contentWindow.document.open();d.contentWindow.document.write(b);d.contentWindow.document.close();a.style.height=a.clientHeight+"px";a.style.background="#fff";
n();a.appendChild(N());a.querySelector(".standard_320x50")&&(N().style.right="initial",N().style.marginLeft="130px");if(ga=0===a.offsetTop)a.style.bottom="auto",a.style.position="absolute";l.a(c,"touchstart",G);l.a(c,"touchmove",G);l.a(c,"scroll",v);l.a(c,"touchend",q)}}function n(){for(var a in R)m.style[a]=R[a]}function r(a,b){for(var d,c=C.length-1;0<=c;c--)if(C[c]!==m&&(d=C[c].getElementsByTagName("iframe")[0])){try{b=frameElement.contentWindow.document?!0:!1}catch(e){b=!1}b&&(a=d.getClientRects()[0].height,
d.style.height="0",function(b){setTimeout(function(){try{b.style.height=b.contentWindow.document.body.scrollHeight+"px"}catch(d){b.style.height=a+"px"}},10)}(d))}q()}function q(){clearTimeout(H);var a=ma(),b=m&&m.firstChild,d=1/a,e=100/d;if(b){if(1<a||ga){m.style.position="absolute";m.style.top="0";m.style.left="0";m.style.left=f.body.scrollLeft*a+"px";m.style.width=c.innerWidth*a+"px";m.style.zoom=1/a;var g=f.documentElement,h=(c.pageYOffset||g.scrollTop)-(g.clientTop||0);m.style.left=Math.floor(((c.pageXOffset||
g.scrollLeft)-(g.clientLeft||0))*a+c.innerWidth*a-m.scrollWidth/a)+"px";m.style.top=Math.floor(h*a+c.innerHeight*a-50)+"px";a=(e-100)/2;b.setAttribute("style",na({scale:d,translateX:"-"+a+"%",translateY:"-"+a+"%"})+"; width: "+e+"%; height: "+50/d+"px;border:none");H=setTimeout(function(){q()},300)}else b.hasAttribute("style")&&b.removeAttribute("style"),b.style.border="none",b.style.width=b.style.height="100%",n();m?(m.style.height="48px",m.style.opacity=1):W()}}function G(a,b){a=a||c.event;(b=a.target||
a.srcElement)&&!m.contains(b)&&(clearTimeout(H),e())}function v(){e();clearTimeout(H);H=setTimeout(q,1E3)}function z(a){a.style.borderTop="1px solid #AAA";a.style.boxShadow="0px 0px 5px 0px rgba(0, 0, 0, 0.3)"}function N(){t||(t=new Image,t.src="//r.mradx.net/img/DC/AADF4A.png",t.style.position="absolute",t.style.top="-15px",t.style.right="0",t.style.width="25px",t.style.padding="5px",l.a(t,"click",h));return t}function h(){W();clearTimeout(fa);clearTimeout(H);e(!0);var a=m.id.replace(A,""),b=f.location.href+
"_"+a;V(b);clearInterval(ha);ha=setInterval(function(){V(b)},6E4);if(g.onAdsClosed&&"function"===typeof g.onAdsClosed)g.onAdsClosed({slot:a})}function e(a){m?(m.style.height="0px",m.style.opacity=0,a&&function(a){setTimeout(function(){try{a.parentNode.removeChild(a),m=null}catch(d){}},1E3)}(m)):W()}function ba(a){if(a.target&&(a=a.target,g.onAdsClicked&&"function"===typeof g.onAdsClicked))g.onAdsClicked({w:D(a,"ad-slot"),link:D(a,"ad-link")})}function ca(a){if(a.target&&(a=a.target,g.onAdsClosed&&
"function"===typeof g.onAdsClosed))g.onAdsClosed({slot:D(a,"ad-slot")})}function aa(){U||Z();q()}function W(){l.b(c,"load",aa);l.b(c,"touchstart",G);l.b(c,"touchmove",G);l.b(c,"scroll",v);l.b(c,"touchend",q);l.b(c,"orientationchange",r);l.b(c,"resize",r);l.b(f,"mrg-click",ba);l.b(f,"mrg-close",ca)}function w(a){var b;b="udid".replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");a=(new RegExp("[\\?&]"+b+"=([^&#]*)")).exec(a);return null===a?"":decodeURIComponent(a[1].replace(/\+/g," "))}function na(a){a=a||
{};var b="",d;for(d in a)b+=d+"("+a[d]+") ";b+="translateZ(0)";return"-webkit-transform: "+b+"; -moz-transform: "+b+"; transform: "+b}function la(a,b){c[da]=function(a){b(a)};var d=f.createElement("script");d.src=a;f.getElementsByTagName("head")[0].appendChild(d)}function D(a,b){if(a)return a.getAttribute("data-"+b);P.warn("No element to get attribute");return null}function S(a){if(M&&M.length){var b=M.shift(),d=b.match(new RegExp(ea,"im"))[1],c=/<script[^>]+src=(\"(.*?)\"|\'(.*?)\'|(.*?))>/gi.exec(b);
if(c=c&&(c[4]||c[3]||c[2]||""))-1<b.indexOf("async")?(ia(c),S(a)):ia(c,function(){S(a)});else{try{eval(d)}catch(e){if(g.onScriptError&&"function"===typeof g.onScriptError)g.onScriptError({el:a,slot:D(a,"ad-slot"),error:e})}S(a)}}}function oa(){var a;try{a=new ActiveXObject("Msxml2.XMLHTTP")}catch(b){try{a=new ActiveXObject("Microsoft.XMLHTTP")}catch(d){a=!1}}a||"undefined"===typeof XMLHttpRequest||(a=new XMLHttpRequest);return a}function ka(a,b){var d=oa();d.open("GET",a,!0);d.onreadystatechange=
function(){4===d.readyState&&200===d.status&&b(d.responseText)};d.send(null)}function ia(a,b){var d=f.createElement("script"),c;d.setAttribute("src",a);b&&(d.onreadystatechange=d.onload=function(){c||b();c=!0});try{f.getElementsByTagName("head")[0].appendChild(d)}catch(e){}}function ma(){var a=/(iPad|iPhone|iPod)/g.test(navigator.userAgent),b,d=90===Math.abs(c.orientation);320===c.screen.width?b=d?480:320:b=c.screen[d?"height":"width"];return b/(a?c.innerWidth:c[d?"innerHeight":"innerWidth"])}function V(a){var b=
(new Date).getTime();"object"===typeof localStorage&&localStorage.setItem&&localStorage.setItem(a.toString(),b.toString())}var P=c.console||{log:function(){}};if("[object Object]"!==Object.prototype.toString.call(c.MRGtag)){var ja,C=[],g={},J=[],Y=!1,X=!1,U=!1,da=A+(new Date).getTime(),Q=[],E=0,R={position:"fixed",width:"100%",zoom:1,top:"auto",left:"auto",bottom:"0",textAlign:"center",zIndex:"2147483647",transition:"opacity .3s,height .3s",webkitTransition:"opacity .3s,height .3s"},m,T,fa,H,ha,ga,
t;ja=c.MRGtag;c.MRGtag=new p;c.MRGtag.push.apply(c.MRGtag,ja);var ea="(?:<script.*?>)((\n|\r|.)*?)(?:\x3c/script>)",M}})(function(B){function l(){y=!0;x(!0)}function p(){y=!1}function w(){f.hidden?y=!1:l()}function I(){x()}function O(){x()}function x(h){for(var e in k)k[e]&&50<=K(k[e].g)&&F()&&!k[e].t?function(e){k[e].t=setTimeout(function(){try{var h,n;if(!G(e))u(e);else if(k[e])if(h=k[e].g,F())if(50>K(h))u(e,!0);else{for(n=k[e].i.length-1;0<=n;n--)(new Image).src=k[e].i[n];u(e);N(k)||(z(c,"resize",
O),z(c,"scroll",I),r&&z(f,r,w),z(c,"focus",l),z(c,"blur",p),clearTimeout(q),L=!1)}else u(e,!0)}catch(v){}},1E3)}(e):k[e]&&50>K(k[e].g)?k[e].t&&(clearTimeout(k[e].t),delete k[e].t):k[e]&&!F()?k[e].t&&(clearTimeout(k[e].t),delete k[e].t,clearTimeout(q),h=!1):k[e]||u(e);h&&(clearTimeout(q),q=setTimeout(function(){x(!0)},300))}function u(c,e){if(c&&k[c])clearTimeout(k[c].t),k[c].t=null,e||(k[c].g=null,delete k[c]);else{clearTimeout(q);q=null;for(var f in k)k[f].t&&u(f,!0)}}function F(){r||"function"!==
typeof f.hasFocus||(y=f.hasFocus());return y}function K(h){var e={};e.f=e.c=Infinity;!isNaN(f.body.clientWidth)&&0<f.body.clientWidth&&(e.f=f.body.clientWidth);!isNaN(f.body.clientHeight)&&0<f.body.clientHeight&&(e.c=f.body.clientHeight);n&&n.clientWidth&&!isNaN(n.clientWidth)&&(e.f=n.clientWidth);n&&n.clientHeight&&!isNaN(n.clientHeight)&&(e.c=n.clientHeight);c.innerWidth&&!isNaN(c.innerWidth)&&(e.f=Math.min(e.f,c.innerWidth));c.innerHeight&&!isNaN(c.innerHeight)&&(e.c=Math.min(e.c,c.innerHeight));
if(Infinity===e.c||Infinity===e.c)e={E:":-("};else{h=h.getClientRects()[0];if(!h)return e={p:0};e.t=h.top;e.s=h.bottom;e.v=h.left;e.r=h.right;e=0>h.bottom||0>h.right||h.top>e.clientHeight||h.left>e.clientWidth?0:Math.round((Math.floor(Math.min(e.f,h.right))-Math.ceil(Math.max(0,h.left)))*(Math.floor(Math.min(e.c,h.bottom))-Math.ceil(Math.max(0,h.top)))/((h.right-h.left)*(h.bottom-h.top))*100)}return e}var L=!1,y=!0,k={},n=f.documentElement,r=f.mozVisibilityState?"mozvisibilitychange":f.webkitVisibilityState?
"webkitvisibilitychange":f.visibilityState?"visibilitychange":"",q,G=B.l,v=B.a,z=B.b,N=B.m;return{j:function(h,e){h.h.id||(e=A+(new Date).getTime(),h.h.id=e);e=h.h.id;k[e]||(k[e]={g:h.h,i:h.o});L||(v(c,"resize",O),v(c,"scroll",I),r?v(f,r,w):(v(c,"blur",p),v(c,"focus",l)),L=!0);x(!0)},u:k}}(w),w);"function"===typeof define&&define.amd&&define("mrg/ads",function(){return c.MRGtag})})(window,document,"mailru_ad");
