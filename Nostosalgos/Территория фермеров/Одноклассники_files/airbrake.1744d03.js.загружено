!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(n.airbrakeJs||(n.airbrakeJs={})).Client=e()}}(function(){return function e(n,t,r){function o(s,a){if(!t[s]){if(!n[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=t[s]={exports:{}};n[s][0].call(c.exports,function(e){var t=n[s][1][e];return o(t?t:e)},c,c.exports,e,n,t,r)}return t[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(e,n,t){(function(t){var r,o,i;e("./internal/compat"),i=e("./internal/merge"),o=e("./internal/promise"),r=function(){function n(n){var r;null==n&&(n={}),this._projectId=n.projectId||0,this._projectKey=n.projectKey||"",this._host="https://api.airbrake.io",this._processor=null,this._reporters=[],this._filters=[],void 0!==n.processor?this._processor=n.processor:this._processor=e("./processors/stack"),void 0!==n.reporter?this.addReporter(n.reporter):(r=e("withCredentials"in new t.XMLHttpRequest?"./reporters/xhr":"./reporters/jsonp"),this.addReporter(r))}return n.prototype.setProject=function(e,n){return this._projectId=e,this._projectKey=n},n.prototype.setHost=function(e){return this._host=e},n.prototype.addContext=function(e){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.warn&&console.warn("airbrake: addContext is deprecated, please use addFilter"),this.addFilter(function(n){return n.context=i({},e,n.context),n})},n.prototype.setEnvironmentName=function(e){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.warn&&console.warn("airbrake: setEnvironmentName is deprecated, please use addFilter"),this.addFilter(function(n){return null==n.context.environment&&(n.context.environment=e),n})},n.prototype.addParams=function(e){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.warn&&console.warn("airbrake: addParams is deprecated, please use addFilter"),this.addFilter(function(n){return n.params=i({},e,n.params),n})},n.prototype.addEnvironment=function(e){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.warn&&console.warn("airbrake: addEnvironment is deprecated, please use addFilter"),this.addFilter(function(n){return n.environment=i({},e,n.environment),n})},n.prototype.addSession=function(e){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.warn&&console.warn("airbrake: addSession is deprecated, please use addFilter"),this.addFilter(function(n){return n.session=i({},e,n.session),n})},n.prototype.addReporter=function(e){return this._reporters.push(e)},n.prototype.addFilter=function(e){return this._filters.push(e)},n.prototype.notify=function(e){var n,r,s;return n={language:"JavaScript",sourceMapEnabled:!0},(null!=(s=t.navigator)?s.userAgent:void 0)&&(n.userAgent=t.navigator.userAgent),t.location&&(n.url=String(t.location),n.rootDirectory=t.location.protocol+"//"+t.location.host),r=new o,this._processor(e.error||e,function(t){return function(o,s){var a,u,l,c,f,p,d,h,y,m,v;for(d={notifier:{name:"airbrake-js-"+o,version:"0.5.3",url:"https://github.com/airbrake/airbrake-js"},errors:[s],context:i(n,e.context),params:e.params||{},environment:e.environment||{},session:e.session||{}},y=t._filters,u=0,c=y.length;c>u;u++){if(a=y[u],p=a(d),null===p||p===!1)return;null!=p.notifier&&null!=p.errors?d=p:"undefined"!=typeof console&&null!==console&&"function"==typeof console.warn&&console.warn("airbrake: filter must return notice or null to ignore the notice")}for(h={projectId:t._projectId,projectKey:t._projectKey,host:t._host},m=t._reporters,l=0,f=m.length;f>l;l++)(v=m[l])(d,h,r)}}(this)),r},n.prototype.push=function(e){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.warn&&console.warn("airbrake: push is deprecated, please use notify"),this.notify(e)},n.prototype._wrapArguments=function(e){var n,t,r,o;for(t=r=0,o=e.length;o>r;t=++r)n=e[t],"function"==typeof n&&(e[t]=this.wrap(n));return e},n.prototype.wrap=function(e){var n,t,r;if(e.__airbrake__)return e;r=this,n=function(){var n,t;n=r._wrapArguments(arguments);try{return e.apply(this,n)}catch(o){return t=o,n=Array.prototype.slice.call(arguments),r.notify({error:t,params:{arguments:n}}),null}};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n.__airbrake__=!0,n.__inner__=e,n},n}(),n.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./internal/compat":2,"./internal/merge":4,"./internal/promise":5,"./processors/stack":7,"./reporters/jsonp":8,"./reporters/xhr":9}],2:[function(e,n,t){var r;null==(r=Array.prototype).indexOf&&(r.indexOf=function(e,n){var t,r,o,i;for(n=n||0,t=r=o=n,i=this.length;i>=o?i>r:r>i;t=i>=o?++r:--r)if(this[t]===e)return t;return-1})},{}],3:[function(e,n,t){var r,o,i;o=e("./truncate"),i=function(e,n){var t,r;null==n&&(n=1e3),t={};for(r in e)t[r]=o(e[r],n=n);return t},r=function(e,n,t){var r,o;for(null==n&&(n=1e3),null==t&&(t=64e3);;){if(e.params=i(e.params,n=n),e.environment=i(e.environment,n=n),e.session=i(e.session,n=n),o=JSON.stringify(e),o.length<t)return o;if(0===n)break;n=Math.floor(n/2)}throw r=new Error("airbrake-js: cannot jsonify notice (length="+o.length+" maxLength="+t+")"),r.params={json:o.slice(0,+Math.floor(n/2)+1||9e9)+"..."},r},n.exports=r},{"./truncate":6}],4:[function(e,n,t){var r;r=function(){var e,n,t,r,o,i;for(i=Array.prototype.slice.call(arguments),e=i.shift()||{},n=0,r=i.length;r>n;n++){o=i[n];for(t in o)Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=o[t])}return e},n.exports=r},{}],5:[function(e,n,t){var r;r=function(){function e(e){var n,t;this._onResolved=[],this._onRejected=[],t=function(e){return function(){return e.resolve.apply(e,arguments)}}(this),n=function(e){return function(){return e.reject.apply(e,arguments)}}(this),null!=e&&e(t,n)}return e.prototype.then=function(e,n){return e&&(null!=this._resolvedWith&&e(this._resolvedWith),this._onResolved.push(e)),n&&(null!=this._rejectedWith&&n(this._resolvedWith),this._onRejected.push(n)),this},e.prototype["catch"]=function(e){return null!=this._rejectedWith&&e(this._rejectedWith),this._onRejected.push(e),this},e.prototype.resolve=function(){var e,n,t,r;for(this._resolvedWith=arguments,r=this._onResolved,n=0,t=r.length;t>n;n++)e=r[n],e.apply(this,this._resolvedWith);return this},e.prototype.reject=function(){var e,n,t,r;for(this._rejectedWith=arguments,r=this._onRejected,n=0,t=r.length;t>n;n++)e=r[n],e.apply(this,this._rejectedWith);return this},e}(),n.exports=r},{}],6:[function(e,n,t){var r,o;r=function(e,n){var t;try{return e[n]}catch(r){return void(t=r)}},o=function(e,n,t){var o,i,s,a,u;return null==n&&(n=1e3),null==t&&(t=5),a=0,s=[],u=[],i=function(e){var n,t,o,i,a;for(t=u.indexOf(e),i=[s[t]],n=o=a=t;0>=a?0>=o:o>=0;n=0>=a?++o:--o)u[n]&&r(u[n],i[0])===e&&(e=u[n],i.unshift(s[n]));return"~"+i.join(".")},(o=function(e,l,c){var f,p,d,h,y,m;if(null==l&&(l=""),null==c&&(c=0),a++,a>n)return"[Truncated]";if(null===e||void 0===e)return e;switch(typeof e){case"boolean":case"number":case"string":case"function":return e;case"object":break;default:return String(e)}if(e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(u.indexOf(e)>=0)return"[Circular "+i(e)+"]";if(c++,c>t)return"[Truncated]";if(s.push(l),u.push(e),a--,"[object Array]"===Object.prototype.toString.apply(e)){for(f=[],d=h=0,y=e.length;y>h&&(p=e[d],a++,!(a>=n));d=++h)f.push(o(p,l=d,c));return f}f={};for(l in e)if(Object.prototype.hasOwnProperty.call(e,l)){if(a++,a>=n)break;m=r(e,l),void 0!==m&&(f[l]=o(m,l=l,c))}return f})(e)},n.exports=o},{}],7:[function(e,n,t){var r,o,i;o=[{name:"v8",re:/^\s*at\s(.+?)\s\((?:(?:(.+):(\d+):(\d+))|(.+))\)$/,fn:function(e){return{"function":e[1],file:e[2]||e[5],line:e[3]&&parseInt(e[3],10)||0,column:e[4]&&parseInt(e[4],10)||0}}},{name:"firefox30",re:/^(.*)@(.+):(\d+):(\d+)$/,fn:function(e){var n,t,r,o;return r=e[1],t=e[2],n=/^(\S+)\s(line\s\d+\s>\seval.*)$/,(o=t.match(n))&&(r=r.length>0?r+" "+o[2]:o[2],t=o[1]),{"function":r,file:t,line:parseInt(e[3],10),column:parseInt(e[4],10)}}},{name:"firefox14",re:/^(.*)@(.+):(\d+)$/,fn:function(e,n,t){var r;return r=0===n?t.columnNumber||0:0,{"function":e[1],file:e[2],line:parseInt(e[3],10),column:r}}},{name:"v8-short",re:/^\s*at\s(.+):(\d+):(\d+)$/,fn:function(e){return{"function":"",file:e[1],line:parseInt(e[2],10),column:parseInt(e[3],10)}}},{name:"phantomjs",re:/^\s*at\s(.+):(\d+)$/,fn:function(e){return{"function":"",file:e[1],line:parseInt(e[2],10),column:0}}},{name:"default",re:/.+/,fn:function(e){return{"function":e[0],file:"",line:0,column:0}}}],i=/^\S+:\s.+$/,r=function(e,n){var t,r,s,a,u,l,c,f,p,d,h,y,m,v,g;for(h="nostack",m=e.stack||"",f=m.split("\n"),t=[],r=s=0,u=f.length;u>s;r=++s)if(c=f[r],""!==c)for(a=0,l=o.length;l>a;a++)if(y=o[a],p=c.match(y.re)){h=y.name,t.push(y.fn(p,r,e));break}return("v8"===h||"v8-short"===h)&&t.length>0&&t[0]["function"].match(i)&&(t=t.slice(1)),0!==t.length||null==e.fileName&&null==e.lineNumber&&null==e.columnNumber||t.push({"function":"",file:e.fileName||"",line:parseInt(e.lineNumber,10)||0,column:parseInt(e.columnNumber,10)||0}),0!==t.length||null==e.filename&&null==e.lineno&&null==e.column&&null==e.colno||t.push({"function":"",file:e.filename||"",line:parseInt(e.lineno,10)||0,column:parseInt(e.column||e.colno,10)||0}),d=null!=e.message?e.message:String(e),null!=e.name&&""!==e.name?(v=e.name,d=v+": "+d):(g=/^Uncaught\s(.+?):\s.+$/,p=d.match(g),v=p?p[1]:""),n(h,{type:v,message:d,backtrace:t})},n.exports=r},{}],8:[function(e,n,t){(function(t){var r,o,i;o=e("../internal/jsonify_notice"),r=0,i=function(e,n,i){var s,a,u,l,c,f,p;return r++,s="airbrakeCb"+String(r),t[s]=function(n){var r;e.id=n.id,i.resolve(e);try{return delete t[s]}catch(o){return r=o,t[s]=void 0}},l=encodeURIComponent(o(e)),p=n.host+"/api/v3/projects/"+n.projectId+"/create-notice?key="+n.projectKey+"&callback="+s+"&body="+l,a=t.document,u=a.getElementsByTagName("head")[0],f=a.createElement("script"),f.src=p,c=function(){return u.removeChild(f)},f.onload=c,f.onerror=c,u.appendChild(f)},n.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../internal/jsonify_notice":3}],9:[function(e,n,t){(function(t){var r,o;r=e("../internal/jsonify_notice"),o=function(e,n,o){var i,s,a;return a=n.host+"/api/v3/projects/"+n.projectId+"/create-notice?key="+n.projectKey,i=r(e),s=new t.XMLHttpRequest,s.open("POST",a,!0),s.send(i),s.onreadystatechange=function(){var n;return 4===s.readyState&&200===s.status?(n=JSON.parse(s.responseText),e.id=n.id,o.resolve(e)):void 0}},n.exports=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../internal/jsonify_notice":3}]},{},[1])(1)});