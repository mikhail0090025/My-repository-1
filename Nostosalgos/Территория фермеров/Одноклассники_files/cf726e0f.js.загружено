define([],function(){function b(){this._init();}function a(c,d){return{context:c,handler:d,once:false};}b.prototype={_init:function(){this.list=[];},_callHandler:function(e,d,c){e.call(d,c);return this;},trigger:function(g){var f=this,h=f.list.slice(),d=arguments[1];for(var j=0,c=h.length;j<c;j++){var e=h[j];if(e){if(e.once){h.splice(j--,1);}f._callHandler(e.handler,e.context,g,d);}}return f;},attach:function(e,d){var c=this;c.list.push(a(d,e));return c;},attachOnce:function(f,e){var d=this,c=a(e,f);c.once=true;d.list.push(c);return d;},detach:function(g,f){var d=this,h=d.list,e=h.length;while(e-->0){var c=h[e];if(c.handler===g&&c.context===f){h.splice(e,1);}}return d;},hasHandlers:function(){return this.list.length!==0;},switchListener:function(e,d,c){return e?this.attach(d,c):this.detach(d,c);}};return{OkEvent:b,create:function(){return new b();}};});