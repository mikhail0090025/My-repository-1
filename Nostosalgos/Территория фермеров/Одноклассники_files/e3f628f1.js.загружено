define(["OK/ToolbarGrowl","OK/utils/utils"],function(a,b){var f="click",h="layer_notifications",d="__marked";function g(k){var j=3;while(j--){if(k.tagName.toLowerCase()==="a"){return true;}k=k.parentNode;}return false;}function e(i){return i.indexOf("a_")===0;}function c(k){var i=k.target||k.srcElement,l,j;if(!g(i)){return;}while(true){l=i.getAttribute("data-id");if(l){break;}if(i===this){return;}i=i.parentNode;}if(i.classList.contains(d)||e(l)){return;}if(OK.Layers&&OK.Layers.isLayerOpened(h)){i.classList.add(d);}else{j=a.getByLayerId(h);if(j&&j.id===l){j.destroy();}}b.ajax({url:"/web-api/notifications/mark/"+l});}return{activate:function(i){i.addEventListener(f,c,true);},deactivate:function(i){i.removeEventListener(f,c,true);}};});