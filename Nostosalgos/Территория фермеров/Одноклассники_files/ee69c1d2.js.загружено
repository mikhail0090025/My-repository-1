define(["OK/utils/delegate","OK/utils/dom","OK/utils/vanilla"],function(b,d,a){function c(){}c.prototype={activate:function(f){this.hook=f;this.delegator=new b(this.hook);this.isForceDraw=f.getAttribute("data-force-draw-active")==="true";this.likeIcon=f.getAttribute("data-like-icon");var e=this;this.delegator.on("click",".js-klass",function(m){var j=d.parent(this,"widget");var l=d.parent(this,"widget-list_i");l.classList.toggle("__animated",!h);var h=j.classList.contains("__active");if(e.isForceDraw){var i=d.firstByClass(this,"js-count");var g=parseInt(i.innerText.replace(/\s/g,""),10)||0;var k=d.firstByClass(this,"widget_ico");if(h){j.classList.remove("__active");i.innerText=a.formatNumber(--g);j.removeAttribute("data-react");k.className="widget_ico ic_klass";}else{j.classList.add("__active");i.innerText=a.formatNumber(++g);if(e.likeIcon){k.className="widget_ico __react __react-"+e.likeIcon;j.setAttribute("data-react",e.likeIcon);}else{k.className="widget_ico __react __react-like";j.setAttribute("data-react","like");}l.classList.remove("__animated");}}});},deactivate:function(){this.delegator.off();}};return c;});