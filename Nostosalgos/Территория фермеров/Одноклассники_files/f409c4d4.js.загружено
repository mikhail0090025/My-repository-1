define(["OK/PhotoUploadController"],function(a){var e={_cache:[],add:function(f){if(this._cache.indexOf(f)===-1){this._cache.push(f);}},remove:function(g){var f=this._cache.indexOf(g);if(f!==-1){this._cache.splice(f,1);}},contains:function(f){return this._cache.indexOf(f)!==-1;}};function c(){}c.prototype={activate:function(f){var g=this.inputEl=f.querySelector('input[type="file"]');if(g){g.addEventListener("change",d);e.add(g);b(g);}},deactivate:function(){e.remove(this.inputEl);}};function d(f){var g=f.target;b(g);if(!e.contains(g)){g.removeEventListener("change",d);g=null;}}function b(l){var f=l.files;var j=[];if(f){for(var h=0;h<f.length;h++){j.push(f.item(h));}l.value=null;try{var g=JSON.parse(l.getAttribute("data-context"));}catch(k){return;}if(j.length){a.uploadPhotos(j,g);}}}return c;});