var Airbrake=function(){function t(){}return t.init=function(n,e){if(void 0!=typeof airbrakeJs){var r=new airbrakeJs.Client({projectId:"560eb20db6682e421f004917",projectKey:"d46d4849e3b5faf36c2ed94a0255950e"});r.setHost("https://errbit.sqtools.ru"),window.onerror=function(t,i,o,s,a){"Script error."!=t&&r.notify({error:a||{message:t,fileName:i,lineNumber:o,columnNumber:s||0},context:{environment:n.environment},environment:{environment:n.environment},params:n,session:e})},t.client=r}},t}(),Initializer=function(){function t(){}return t.initHTML5Banner=function(){throw new Error("Must be overriden.")},t}(),Manifest=function(){function t(t){this._manifest=t}return t.prototype.getVersionedName=function(t){var n=this.getVersion(t);if(!n)return t;var e=t.match(/(.*)\.([^\.]*)$/);if(!e)return t+"."+n;var r=e[1],i=e[2];return r+"."+n+"."+i},t.prototype.getVersion=function(t){return this._manifest.hasOwnProperty(t)?this._manifest[t]:null},t}(),Parameters=function(){function t(){t.instance=this;var n=document.body,e=n.getAttribute("data-manifest");e=JSON.parse(e)||{},this.manifest=new Manifest(e),this.environment=n.getAttribute("data-environment")||"development";var r=JSON.parse(n.getAttribute("data-settings"))||{};this.staticURL=r.static_url||"",this.linkTarget=r.link_target||"_blank"}return t}(),ScriptLoader=function(){function t(){this._scriptsURLs,this._scriptElements=[],this._isLoading=!1,this._onScriptLoaded=this._onScriptLoaded.bind(this),this._onScriptFailed=this._onScriptFailed.bind(this)}return t.prototype.load=function(t,n){if(this._isLoading===!0)throw new Error("Loading in progress.");if("string"!=typeof t)throw new Error("scriptURL must be a string, "+typeof t+" ("+t+") given!");this.loadScripts([t],n)},t.prototype.loadScripts=function(t,n){if(this._isLoading===!0)throw new Error("Loading in progress.");if(!(t instanceof Array))throw new Error("scriptsURLs must be array!");this._scriptsURLs=t,this._callback=n,this._isLoading=!0,this._loadScript()},t.prototype._loadScript=function(){if(!this._scriptsURLs||0==this._scriptsURLs.length)return!1;var t,n=this._scriptsURLs.shift();return n?(t=document.createElement("script"),t.crossOrigin="anonymous",t.src=n,t.onload=this._onScriptLoaded,t.onerror=this._onScriptFailed,this._scriptElements.push(t),document.head.appendChild(t),!0):!1},t.prototype._onScriptLoaded=function(t){this._isLoading&&0==this._loadScript()&&(this._isLoading=!1,this._callback&&this._callback({success:!0}),this._clear())},t.prototype._onScriptFailed=function(t){this._isLoading=!1,this._callback&&this._callback({success:!1,error:"Failed to load script: "+t.target.src}),this._clear()},t.prototype._clear=function(){var t,n;for(t=0;t<this._scriptElements.length;t++)n=this._scriptElements[t],n.onload=null,n.onerror=null;this._scriptElements=[],this._scriptsURLs=null,this._isLoading=!1},t}(),Utils=function(){function t(){}return t.parseParams=function(t){var n={};return t.substr(1).split("&").forEach(function(t){var e=t.substring(0,t.indexOf("=")),r=t.substring(e.length+1);n[e]=r}),n},t.getConfigPath=function(t){var n;switch(window.location.hostname){case"dd-cdn.socialquantum.com":n="//dd-cdn.socialquantum.com/files/internals/configs/";break;case"internals.socialquantum.com":n="/configs/";break;case"dev-banners.socialquantum.com":n="/configs/"}return n+=t.dev&&"true"==t.dev.toString()?"dev/":"prod/",n+t.game_code+"_"+t.platform+"/"},t.getFullConfigPath=function(n,e,r,i){return t.getConfigPath(r)+n+".json?v="+e.manifest.getVersion("html_js/init.js")+"&r="+Math.random()+"&s="+i},t.browser=function(){var t=!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,n="undefined"!=typeof InstallTrigger,e=Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0,r=!!window.chrome&&!t,i=!!document.documentMode,o=navigator.userAgent.toLowerCase(),s=-1!=o.indexOf("msie")?parseInt(o.split("msie")[1]):!1,a=8==s;return{isOpera:t,isFirefox:n,isSafari:e,isChrome:r,isIE:i,isIE8:a}}(),t.bannerType=function(){var t=window.location.pathname.match(/(toolbar|rotator).html$/);if(!t)throw new Error("Unknown banner type, must be toolbar or rotator.");return t[1]}(),t.isCanvasSupported=function(){var t=!1;try{t=void 0!=document.createElement("canvas").getContext}catch(n){}return t}(),t.loadJSON=function(t,n){var e=new XMLHttpRequest;e.overrideMimeType&&e.overrideMimeType("application/json"),e.open("GET",t,!0),e.onreadystatechange=function(){4==e.readyState&&"200"==e.status&&n(JSON.parse(e.responseText))},e.send(null)},t.sendRequest=function(t,n){var e=new XMLHttpRequest;if(void 0!=n){var r=Object.keys(n).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(n[t])}).join("&");t=t+"?"+r}e.open("GET",t,!0),e.send()},t.sendStat=function(n,e,r,i){url="https://collector.stats.socialquantum.ru/"+r+"/evt/";var o={st1:"sqbanner",st2:i,st3:e,n:n,s:0,v:1,direct:!0};t.sendRequest(url,o)},t}();window.onload=function(){var t=new Parameters,n=Utils.parseParams(window.location.search);"energy"==n.game_code&&(n.game_code="wildwest"),"dz3d"==n.game_code&&(t.linkTarget="_top"),t.backgroundColor=n.bg_color||null;var e=Utils.bannerType,r=t.staticURL,i=["html_js/libs/createjs.js","html_js/"+e+".js"];i=i.map(function(n){return n=t.manifest.getVersionedName(n),r+n});var o=new ScriptLoader;o.loadScripts(i,function(r){if(1!=r.success)throw console.log(r.error),r.error;n.configURL=Utils.getFullConfigPath(e,t,n,"html5"),Initializer.initHTML5Banner(n)})};
//# sourceMappingURL=init.js.map